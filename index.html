<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beds24 モバイル管理アプリ</title>
  <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.css' rel='stylesheet' />
  <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.js'></script>
  <style>
    /* スタイル */
  </style>
</head>
<body>
  <!-- HTMLコンテンツ -->

  <div id="calendar"></div>

  <!-- 価格変更フォーム -->
  <div class="form-container">
    <h2>価格の変更</h2>
    <label for="price">価格を入力</label>
    <input type="number" id="price" value="10000">
    <button onclick="updatePrice()">価格を更新</button>
  </div>

  <!-- 予約状況変更フォーム -->
  <div class="form-container">
    <h2>予約状況の変更</h2>
    <label for="availabilityStatus">ステータス</label>
    <select id="availabilityStatus">
      <option value="available">予約可能</option>
      <option value="closed">売り止め</option>
      <option value="noCheckin">チェックイン不可</option>
      <option value="noCheckout">チェックアウト不可</option>
    </select>
    <button onclick="updateAvailability()">予約状況を更新</button>
  </div>

  <!-- ここからJavaScriptを記述 -->
  <script>
    // zu/Qy8TGk3rkXD7PaQV6wpprXjFNnRNhwzbgjyn+tkuRrZcA8bojV1eWCxhKgNGgywQkhUDxQiRO/9Y6rALiIquDEE5BhTKe5xfq7NC0EFHIeKdc7uzljtjYG10raFv92XNvdlGTrVCItQoNu9GP0w==
    const API_TOKEN = 'YOUR_GENERATED_TOKEN';  // zu/Qy8TGk3rkXD7PaQV6wpprXjFNnRNhwzbgjyn+tkuRrZcA8bojV1eWCxhKgNGgywQkhUDxQiRO/9Y6rALiIquDEE5BhTKe5xfq7NC0EFHIeKdc7uzljtjYG10raFv92XNvdlGTrVCItQoNu9GP0w==
    const YOUR_PROPERTY_ID = 'YOUR_PROPERTY_ID'; // 219763

    function updatePrice() {
      const newPrice = document.getElementById('price').value;
      const selectedDate = new Date();

      fetch('https://api.beds24.com/json/setPrices', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${API_TOKEN}` // トークンを使用
        },
        body: JSON.stringify({
          propertyId: YOUR_PROPERTY_ID,  // 物件IDを指定
          prices: [{
            date: selectedDate.toISOString().split('T')[0],  // 日付を "YYYY-MM-DD" 形式に
            price: newPrice  // 新しい価格
          }]
        })
      })
      .then(response => response.json())
      .then(data => {
        if (data.status === 'success') {
          alert('価格が更新されました');
        } else {
          alert('価格更新に失敗しました');
        }
      })
      .catch(error => {
        console.error('エラー:', error);
      });
    }

    function updateAvailability() {
      const status = document.getElementById('availabilityStatus').value;
      const selectedDate = new Date();

      fetch('https://api.beds24.com/json/setAvailability', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${API_TOKEN}` // トークンを使用
        },
        body: JSON.stringify({
          propertyId: YOUR_PROPERTY_ID,
          availability: [{
            date: selectedDate.toISOString().split('T')[0],
            status: status
          }]
        })
      })
      .then(response => response.json())
      .then(data => {
        if (data.status === 'success') {
          alert('予約可能状況が更新されました');
        } else {
          alert('更新に失敗しました');
        }
      })
      .catch(error => {
        console.error('エラー:', error);
      });
    }
  </script>
</body>
</html>
